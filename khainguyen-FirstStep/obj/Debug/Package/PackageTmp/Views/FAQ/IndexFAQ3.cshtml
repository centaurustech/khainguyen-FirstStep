@model IEnumerable<khainguyen_FirstStep.EntityGroupFAQ>
@*@{
    ViewBag.Title = "IndexFAQ3";
}*@

@section MeTaHeader
{
    <meta name="robots" content="noindex,nofollow" />
}

<!-- SLIDE -->
<div class="slider-fix-300">
<div id="slides">
    <ul class="slides-container">
        <li><img src="~/Content/cssFrontEnd/upload/bigslider/img7.jpg" /></li>
        <li><img src="~/Content/cssFrontEnd/upload/bigslider/img8.jpg" /></li>>
    </ul>
    <div class="faq-intro">
        <div class="container">
            <div class="faq-logo"><i class="fa-support fa-spin"></i></div>
            <div class="faq-info">
                <div class="faq-title">@ViewBag.Title</div>
                <div class="faq-des">Tìm kiếm giải đáp cho những thắc mắc của bạn.</div>
            </div>
        </div>
    </div>
</div>
</div>
<!-- FAQ -->
<div class="container">

    @*<div class="faq-search">
        <input class="form-txt" type="text" placeholder="search anything, you need help :)" /><i class="fa-search"></i>
    </div>*@

    <nav class="faq-category">
        @{
            foreach(var item in Model)
            {
                <a data-hashtag1="@Utilities.Encode(item.TenGroup)" href="#link" class="group" data-idgroup="@item.Id">@item.TenGroup</a>
            }
        }
    </nav>

    <div class="faq-show-key" id="link">
        <nav class="faq-gleft nicescroll" id="group">
            @*@Html.Action("_IndexFAQ3_GroupClick", "FAQ", new { id = @Model.ElementAt(0).Id })*@
        </nav>
        <nav class="faq-gright nicescroll" id="tieude">
           @*@Html.Action("_IndexFAQ3_TieuDeClick", "FAQ", new { id = @Model.ElementAt(0).Id })*@
        </nav>
    </div>

    <div class="faq-ask" id="noidung">
        @*@Html.Action("_IndexFAQ3_TieuDeClick", "FAQ", new { id = 0 })*@
    </div>

</div>

<div style="height: 50px;"></div> 
@section jqueryPlugin{

    <script>
        $(document).ready(function () {
            var $slides = $('#slides');
            Hammer($slides[0]).on("swipeleft", function (e) {
                $slides.data('superslides').animate('next');
            });

            Hammer($slides[0]).on("swiperight", function (e) {
                $slides.data('superslides').animate('prev');
            });
            $slides.superslides({
                slide_easing: 'easeInOutCubic',
                slide_speed: 800,
                pagination: false,
                hashchange: false,
                scrollable: true,
                play: 5000,
                animation: 'fade',
                inherit_height_from: '.slider-fix-300'
            });
            
            var HashTagForGroup = function () {
                $(".faq-category a.group").click(function () {
                    var hasha = $(this).data("hashtag1");
                    document.location.hash = hasha;
                });
            };
            HashTagForGroup();

            var HashTagForTitle = function () {
                $(".faq-show-key .faq-gleft").on("click","a.tieude", function () {
                    var hasha = $(this).data("hashtag2");
                    document.location.hash = window.location.hash + "&" + hasha;
                });
            }; 
            HashTagForTitle();

            var HashTagForContent = function () {
                $(".faq-show-key .faq-gright").on("click", "a.noidung", function () {
                    var hasha = $(this).data("hashtag3");
                    document.location.hash = window.location.hash + "&" + hasha;
                });
            };
            HashTagForContent();

            var AutoGroup = function () {
                var hashw = window.location.hash;
                if (hashw.length > 0) {
                    hashw = hashw.replace('#', '');
                    $hashtarget = $("a.group[data-hashtag1=" + hashw + "]");                    
                    if ($hashtarget.length > 0) {
                        //alert($hashtarget.offset().top);
                        //e.preventDefault();
                        $("a.group").removeClass("actived");
                        $hashtarget.addClass("actived");
                        var id = $hashtarget.data("idgroup");
                        var postURL = '@Url.Action("_IndexFAQ3_GroupClick", "FAQ")';
                        $.post(postURL, { "id": id }, function (data) {
                            if (data == "Error") {
                                alert("Error");
                            } else {
                                $('#group').html(data);
                            }
                        });
                    }
                }
            };
            AutoGroup();

            group();
            tieude();
            noidung();

            //var HashTagForTieuDe = function () {
            //    $(".faq-category a").click(function () {
            //        var hasha = $(this).data("hashtag2");
            //        document.location.hash = hasha;
            //    });
            //}
            //HashTagForTieuDe();
        });

        function group() {
            $("a.group").click(function (e) {
                e.preventDefault();
                $("a.group").removeClass("actived");
                $(this).addClass("actived");
                var id = $(this).data("idgroup");
                var postURL = '@Url.Action("_IndexFAQ3_GroupClick", "FAQ")';
                $.post(postURL, { "id": id }, function (data) {
                    if (data == "Error") {
                        alert("Error");
                    } else {
                        $('#group').html(data);
                        $('#tieude').html("");
                    }
                });
            });
        }

        function tieude() {
            $(".faq-gleft").on("click", "a.tieude", function (e) {
                e.preventDefault();
                $("a.tieude").removeClass("actived");
                $(this).addClass("actived");
                var id = $(this).data("idtieude");
                var postURL = '@Url.Action("_IndexFAQ3_TieuDeClick", "FAQ")';
                $.post(postURL, { "id": id }, function (data) {
                    if (data == "Error") {
                        alert("Error");
                    } else {
                        $('#tieude').html(data);
                    }
                });
            });
        }
        function noidung() {
            $(".faq-gright").on("click", "a.noidung", function (e) {
                e.preventDefault();
                $("a.noidung").removeClass("actived");
                $(this).addClass("actived");
                var id = $(this).data("idnoidung");
                var postURL = '@Url.Action("_IndexFAQ3_NoiDungClick", "FAQ")';
                $.post(postURL, { "id": id }, function (data) {
                    if (data == "Error") {
                        alert("Error");
                    } else {
                        $('#noidung').html(data);
                        //var target_offfset = $("#noidung").offset();
                        //var target_top = target_offfset.top;
                        //$('html, body').animate({ scrollTop: target_top }, 1500, 'easeInsine');
                    }
                });
            });
        }
    </script>
    <style>
        a.group.actived{color: #fff; background-color: #ffb116}
        a.tieude.actived{color: #fff; background-color: #ffb116}
        a.noidung.actived{color: #fff; background-color: #ffb116}
    </style>
}